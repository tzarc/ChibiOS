  digraph example {
    rankdir="LR";

    node [shape=circle, fontname=Sans Serif, fontsize=8, fixedsize="true", width="0.8", height="0.8"];
    edge [fontname=Sans Serif, fontsize=8];

    init [label="Semaphore\nnot\nInitialized"];
    ntaken [label="Not Taken"];
    taken [label="Taken\n(No Threads\nQueued)"];
    qtaken [label="Taken\n(Threads\nQueued)"];

    init -> ntaken [label="\nchBSemObjectInit(false)\nBSEMAPHORE_DECL(false)"];
    init -> taken [label="\nchBSemObjectInit(true)\nBSEMAPHORE_DECL(true)"];
    ntaken -> taken [label="\nchBSemWait()\nchBSemReset(true)"];
    taken -> qtaken [label="\nchBSemWait()"];
    qtaken -> qtaken [label="\nchBSemSignal()\n(not last)"];
    qtaken -> qtaken [label="\nchBSemWait()"];
    qtaken -> taken [label="\nchBSemSignal()\n(last thread)"];
    taken -> ntaken [label="\nchBSemSignal()\nchBSemReset(false)"];
    ntaken -> ntaken [label="\nchBSemSignal()\nchBSemReset(false)"];
    taken -> taken [label="\nchBSemReset(true)"];
  }
